!function(){"use strict";function n(n){return"[object Array]"===Object.prototype.toString.call(n)}function t(n){return n instanceof Function}function e(n){return!t(n)&&n instanceof Object}function i(t,a){var o;for(o in a)e(a[o])||n(a[o])?(e(a[o])&&!e(t[o])&&(t[o]={}),n(a[o])&&!n(t[o])&&(t[o]=[]),i(t[o],a[o])):void 0!==a[o]&&(t[o]=a[o])}function a(n,t){var e={};return i(e,n),i(e,t),e}function o(n){var t,e,i,a,o,r,c,l,u,s,d;return s=Object.prototype.toString.call(n),"[object Date]"===s?n:"[object String]"===s&&(i=n.match(T))?(d=parseInt(i[1],10),r=parseInt(i[3],10)-1,t=parseInt(i[5],10),e=parseInt(i[7],10),o=i[9]?parseInt(i[9],10):0,u=i[11]?parseInt(i[11],10):0,a=i[12]?1e3*parseFloat(k+i[12].slice(1)):0,l=Date.UTC(d,r,t,e,o,u,a),i[13]&&i[14]&&(c=60*i[15],i[17]&&(c+=parseInt(i[17],10)),c*="-"===i[14]?-1:1,l-=60*c*1e3),new Date(l)):void 0}function r(n){var t,e,i;for(t=0;t<n.length;t++)for(i=n[t].data,e=0;e<i.length;e++)if(i[e][1]<0)return!0;return!1}function c(n,t,e,i,o){return function(c,l,u){var s=a({},n);return s=a(s,u||{}),l.hideLegend&&t(s),"min"in l?e(s,l.min):r(c)||e(s,0),"max"in l&&i(s,l.max),l.stacked&&o(s),s=a(s,l.library||{})}}function l(n,t){document.body.innerText?n.innerText=t:n.textContent=t}function u(n,t){l(n,"Error Loading Chart: "+t),n.style.color="#ff0000"}function s(n,t,e){jQuery.ajax({dataType:"json",url:t,success:e,error:function(t,e,i){var a="string"==typeof i?i:i.message;u(n,a)}})}function d(n,t,e,i){try{i(n,t,e)}catch(a){throw u(n,a.message),a}}function f(n,t,e,i){"string"==typeof t?s(n,t,function(t){d(n,t,e,i)}):d(n,t,e,i)}function g(n){return""+n}function h(n){return parseFloat(n)}function p(n){if("object"!=typeof n)if("number"==typeof n)n=new Date(1e3*n);else{var t=n.replace(/ /,"T").replace(" ","").replace("UTC","Z");n=o(t)||new Date(n)}return n}function w(t){if(!n(t)){var e,i=[];for(e in t)t.hasOwnProperty(e)&&i.push([e,t[e]]);t=i}return t}function v(n,t){return n[0].getTime()-t[0].getTime()}function m(t,e,i){var a,o,r,c,l;for(!n(t)||"object"!=typeof t[0]||n(t[0])?(t=[{name:"Value",data:t}],e.hideLegend=!0):e.hideLegend=!1,a=0;a<t.length;a++){for(r=w(t[a].data),c=[],o=0;o<r.length;o++)l=r[o][0],l=i?p(l):g(l),c.push([l,h(r[o][1])]);i&&c.sort(v),t[a].data=c}return t}function y(n,t,e){U(n,m(t,e,!0),e)}function x(n,t,e){R(n,m(t,e,!1),e)}function C(n,t,e){var i,a=w(t);for(i=0;i<a.length;i++)a[i]=[g(a[i][0]),h(a[i][1])];G(n,a,e)}function b(n,t,e){Z(n,m(t,e,!1),e)}function A(n,t,e){N(n,m(t,e,!0),e)}function S(n,t,e,i){"string"==typeof n&&(n=document.getElementById(n)),f(n,t,e||{},i)}var z,T,k,L,O,j,D,I,E,W,H,P,V,B,F,U,G,R,Z,N;if(T=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,k=String(1.5).charAt(1),"Highcharts"in window)L={chart:{},xAxis:{labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},series:{marker:{}}}},O=function(n){n.legend.enabled=!1},j=function(n,t){n.yAxis.min=t},D=function(n,t){n.yAxis.max=t},I=function(n){n.plotOptions.series.stacking="normal"},E=c(L,O,j,D,I),U=function(n,t,e,i){i=i||"spline";var a={};"areaspline"===i&&(a={plotOptions:{areaspline:{stacking:"normal"},series:{marker:{enabled:!1}}}});var o,r,c,l=E(t,e,a);for(l.xAxis.type="datetime",l.chart.type=i,l.chart.renderTo=n.id,r=0;r<t.length;r++){for(o=t[r].data,c=0;c<o.length;c++)o[c][0]=o[c][0].getTime();t[r].marker={symbol:"circle"}}l.series=t,new Highcharts.Chart(l)},G=function(n,t,e){var i=a(L,e.library||{});i.chart.renderTo=n.id,i.series=[{type:"pie",name:"Value",data:t}],new Highcharts.Chart(i)},R=function(n,t,e,i){i=i||"column";var a,o,r,c,l=E(t,e),u=[];for(l.chart.type=i,l.chart.renderTo=n.id,a=0;a<t.length;a++)for(r=t[a],o=0;o<r.data.length;o++)c=r.data[o],u[c[0]]||(u[c[0]]=new Array(t.length)),u[c[0]][a]=c[1];var s=[];for(a in u)u.hasOwnProperty(a)&&s.push(a);l.xAxis.categories=s;var d=[];for(a=0;a<t.length;a++){for(c=[],o=0;o<s.length;o++)c.push(u[s[o]][a]||0);d.push({name:t[a].name,data:c})}l.series=d,new Highcharts.Chart(l)},Z=function(n,t,e){R(n,t,e,"bar")},N=function(n,t,e){U(n,t,e,"areaspline")};else if("google"in window){W=!1,google.setOnLoadCallback(function(){W=!0});var Q={packages:["corechart"]},$=window.Chartkick||{};$.language&&(Q.language=$.language),google.load("visualization","1.0",Q),H=function(n){google.setOnLoadCallback(n),W&&n()},L={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},O=function(n){n.legend.position="none"},j=function(n,t){n.vAxis.viewWindow.min=t},D=function(n,t){n.vAxis.viewWindow.max=t},P=function(n,t){n.hAxis.viewWindow.min=t},V=function(n,t){n.hAxis.viewWindow.max=t},I=function(n){n.isStacked=!0},E=c(L,O,j,D,I),B=function(n,t){var e=new google.visualization.DataTable;e.addColumn(t,"");var i,a,o,r,c,l=[];for(i=0;i<n.length;i++)for(o=n[i],e.addColumn("number",o.name),a=0;a<o.data.length;a++)r=o.data[a],c="datetime"===t?r[0].getTime():r[0],l[c]||(l[c]=new Array(n.length)),l[c][i]=h(r[1]);var u=[];for(i in l)l.hasOwnProperty(i)&&u.push(["datetime"===t?new Date(h(i)):i].concat(l[i]));return"datetime"===t&&u.sort(v),e.addRows(u),e},F=function(n){window.attachEvent?window.attachEvent("onresize",n):window.addEventListener&&window.addEventListener("resize",n,!0),n()},U=function(n,t,e){H(function(){var i=E(t,e),a=B(t,"datetime"),o=new google.visualization.LineChart(n);F(function(){o.draw(a,i)})})},G=function(n,t,e){H(function(){var i={chartArea:{top:"10%",height:"80%"}},o=a(a(L,i),e.library||{}),r=new google.visualization.DataTable;r.addColumn("string",""),r.addColumn("number","Value"),r.addRows(t);var c=new google.visualization.PieChart(n);F(function(){c.draw(r,o)})})},R=function(n,t,e){H(function(){var i=E(t,e),a=B(t,"string"),o=new google.visualization.ColumnChart(n);F(function(){o.draw(a,i)})})},Z=function(n,t,e){H(function(){var i={hAxis:{gridlines:{color:"#ccc"}}},a=c(L,O,P,V,I)(t,e,i),o=B(t,"string"),r=new google.visualization.BarChart(n);F(function(){r.draw(o,a)})})},N=function(n,t,e){H(function(){var i={isStacked:!0,pointSize:0,areaOpacity:.5},a=E(t,e,i),o=B(t,"datetime"),r=new google.visualization.AreaChart(n);F(function(){r.draw(o,a)})})}}else U=G=R=Z=N=function(){throw new Error("Please install Google Charts or Highcharts")};z={LineChart:function(n,t,e){S(n,t,e,y)},PieChart:function(n,t,e){S(n,t,e,C)},ColumnChart:function(n,t,e){S(n,t,e,x)},BarChart:function(n,t,e){S(n,t,e,b)},AreaChart:function(n,t,e){S(n,t,e,A)}},window.Chartkick=z}();